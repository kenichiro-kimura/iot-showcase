# B-1 SORACOM Lagoon で通知を送る

SORACOM Harvest Data 

## SORACOM Lagoon とは

SORACOM Lagoon はダッシュボード作成/共有サービスです。  
データ収集、蓄積サービス SORACOM Harvest に集められたデータを対象に目的に応じて複数のグラフ、テーブル、地図等を組み合わせたダッシュボードを作成し、それらを共有できる他、条件に応じて様々なサービスへ通知を送ることができます。

詳細は [SORACOM Lagoon サービス紹介ページ](https://soracom.jp/services/lagoon/) をご覧ください。

## SORACOM Lagoon の有効化と SORACOM Lagoon ユーザの作成

TODO

## SORACOM Lagoon へのログイン

TODO

## 通知チャンネルの作成

[チャンネルを追加]

- 名前: `メール` (任意の文字列)
- タイプ: **Email**
- 全てのアラートで送信: (チェックせず)
- Email Addresses: 送信先にしたいアドレスを記載してください

[送信テスト]

このようなメールが届けば設定成功です。 [保存]

![送信テストの結果](images/)

## 新規ダッシュボードの作成

[新規ダッシュボード作成]

## 新規グラフパネルの作成と設定

[新規パネル作成] > [Graph] を選択

### メトリックタブ

- **Air** / LTE-M Button の SIM を選択  / **Standard** / **clickType**

### 表示タブ

- 描画モード
    - 棒 (チェックをつける)
    - 線 (チェックを外す)

### アラートタブ

#### アラート設定

- 条件:
    - WHEN `last()`
    - OF `query(A, 1m, now)`
    - **IS ABOVE** `0`
- データが無いか全ての値が Null の時: **Ok**

#### 通知

- 送り先: **メール** (通知チャンネルで作成した名前を選択)

[ダッシュボードを保存]

## 通知を試してみる

ボタンを押すと、それに対応してメールに通知されます。

**注意点;**

- 次の通知は、通知発生後１分※以上経過してから受け取ることができます。これは過剰な連続通知を避けるための仕組みです。
- 2019年10月時点では通知発生後１分※を経過する "OK" のステートの通知が発生しますが、これは正常な動作です。

※ SORACOM Lagoon のプランによって異なります。Freeプランは最小60秒。Proプランでは5秒です。

# 以上で本ページの作業は完了となります

## トラブルシュート

